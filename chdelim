#!/bin/bash
# Change text delimiter
#
# Usage:
# ./chdelim OLD_DELIM NEW_DELIM INPUT
# ./chdelim OLD_DELIM NEW_DELIM
# ./chdelim INPUT
#
# Default OLD_DELIM is new line.
# Default NEW_DELIM is comma and space.
# Default INPUT is read from stdin.

if [[ $# == 1 ]]; then
  DELIM1='\n'
  DELIM2=', '
  INPUT=$1
else
  DELIM1=${1:-'\n'}
  DELIM2=${2:-', '}
  INPUT=$3
fi

if [[ "$DELIM1" != "\n" ]]; then
  if [[ $INPUT ]]; then
    echo -n "$INPUT" | sed "s/$DELIM1/$DELIM2/g"
  else
    sed "s/$DELIM1/$DELIM2/g"
  fi
else
  if [[ $INPUT ]]; then
    echo -n "$INPUT" | tr "\n" "$DELIM2" | sed "s/${DELIM2:0:1}/$DELIM2/g"
  else
    tr "\n" "$DELIM2" | sed "s/${DELIM2:0:1}/$DELIM2/g"
  fi
fi

# fikr4n 2015
