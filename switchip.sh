#!/bin/bash
# Usage: ./switchip.sh <name>
# See available <name>s in switchip.list. Note that there's no either double
# non-unique name or non-existing name checking in this script.
# 
# switchip.list format:
#   name ip [netmask] [gateway]

NAME=$1
while read -r name ip mask gw; do
	if [ "$name" = "$NAME" ]; then
		if [ -n "$mask" ]; then
			echo ifconfig eth0 "$ip" netmask "$mask"
			ifconfig eth0 "$ip" netmask "$mask"
		else
			echo ifconfig eth0 "$ip"
			ifconfig eth0 "$ip"
		fi
		if [ -n "$gw" ]; then
			echo route add default gw "$gw"
			route add default gw "$gw"
		fi
	fi
done < switchip.list


# fikr4n 2016
